#!/usr/local/bin/ruby -ws

$v    ||= false
$h    ||= false
$f    ||= false
$q    ||= false
$help ||= false

require 'autotest'

if $h or $help then
  Autotest.usage_with_exit
end

style = Autotest.autodiscover
target = Autotest

unless style.empty? then
  mod = "autotest/#{style.join("_")}"
  puts "loading #{mod}"
  begin
    require mod
  rescue LoadError
    abort "Autotest style #{mod} doesn't seem to exist. Aborting."
  end
  target = Autotest.const_get(style.map {|s| s.capitalize}.join)
end
target.run
